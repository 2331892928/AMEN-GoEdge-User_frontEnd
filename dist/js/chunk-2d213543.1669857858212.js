(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213543"],{abe1:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-pa-md"},[o("q-table",{attrs:{data:t.rows,columns:t.columns,filter:t.filter,loading:t.loading,title:"域名管理","no-data-label":"你还没有域名,去添加吧","no-results-label":"没有这个域名","loading-label":"稍等哦，正在加载中","rows-per-page-label":"每页显示数量：","rows-per-page-options":[10,15,20,25,50,0],"row-key":"name"},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"id",attrs:{props:e}},[t._v(" "+t._s(e.row.id)+" ")]),o("q-td",{key:"domain",attrs:{props:e}},[t._v(" "+t._s(e.row.domain)+" ")]),o("q-td",{key:"name",attrs:{props:e}},[t._v(" "+t._s(e.row.name)+" ")]),o("q-td",{key:"status",attrs:{props:e}},[e.row.status?o("q-badge",{attrs:{color:"green"}},[t._v(" 正常 ")]):o("q-badge",{attrs:{color:"red"}},[t._v(" 已停用 ")])],1),o("q-td",{key:"operation",attrs:{props:e}},[o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"settings",size:"10px"},on:{click:function(o){return t.settingDomain(e.row.id)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 修改配置 ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:!0===e.row.status?"do_disturb_alt":"lock_open",size:"10px"},on:{click:function(o){return t.updateDomainNameStatus(e.row.id,e.row.domain,!e.row.status)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" "+t._s(!0===e.row.status?"停用域名":"启用域名")+" ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"delete",size:"10px",disable:e.row.status},on:{click:function(o){return t.removeDomainName(e.row.id,e.row.domain)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 删除域名 ")])],1)],1)])],1)]}},{key:"top",fn:function(){return[o("q-toolbar-title",[t._v(" 域名管理 "),o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{color:"primary",label:"+ 添加域名"},on:{click:function(e){t.prompt=!0}}}),o("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[o("q-card",{staticStyle:{"min-width":"40%"}},[o("q-card-section",[o("div",{staticClass:"text-h6"},[t._v("添加域名")]),o("p",[t._v("其余设置添加完后可管理")])]),o("q-card-section",{staticClass:"q-pt-none"},[o("q-input",{attrs:{autofocus:"",label:"加速域名",hint:"输入加速域名，要求必须是通过 ICP 备案的域名，暂不支持泛域名。"},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),o("q-card-section",{staticClass:"q-pt-none"},[o("q-input",{attrs:{autofocus:"",label:"网站名称",hint:"输入网站名称。"},model:{value:t.address_name,callback:function(e){t.address_name=e},expression:"address_name"}})],1),o("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(e){t.address="",t.address_hy=""}}}),o("q-btn",{attrs:{flat:"",label:"确定添加"},on:{click:t.addDomain}})],1)],1)],1)],1)]),o("q-input",{attrs:{borderless:"",dense:"",debounce:"20",placeholder:"Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[o("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"no-data",fn:function(e){var a=e.icon,n=e.message,i=e.filter;return[o("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[o("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),o("span",[t._v(" oh~... "+t._s(n)+" ")]),o("q-icon",{attrs:{size:"2em",name:i?"filter_b_and_w":a}})],1)]}}])})],1)},n=[],i=(o("b0c0"),o("0fc6")),s=o("1940"),r=o.n(s),c=(o("a639"),{name:"domainNameList",data:function(){return{columns:[{name:"id",required:!0,label:"id",align:"left",field:"id",style:"width: 150px",sortable:!0},{name:"domain",align:"left",label:"域名",field:"domain",sortable:!0},{name:"name",align:"left",label:"网站名称",field:"name",sortable:!0},{name:"status",align:"center",label:"状态",field:"status"},{name:"operation",align:"center",label:"操作",field:"operation",style:"width: 200px"}],rows:[],filter:"",loading:!1,prompt:!1,address:"",address_hy:"",address_name:""}},mounted:function(){this.getDomainList()},methods:{addDomain:function(){var t=this;/^(([-\u4E00-\u9FA5a-z0-9]{1,63})\.)+([\u4E00-\u9FA5a-z]{2,63})\.?$/.test(this.address)?Object(i["createServer"])(this.address,this.address_name).then((function(e){if(200===e.data.code)var o=setTimeout((function(){t.getDomainList(),t.$q.notify({icon:"insert_emoticon",message:"添加成功",color:"green",position:"top",timeout:1500}),clearTimeout(o),t.prompt=!1}),3e3*Math.random());else t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:5e3})})):this.$q.notify({icon:"warning",message:"域名不合法，不是有效的域名",color:"warning",position:"top",timeout:1500})},getDomainList:function(){var t=this;this.loading=!this.loading,Object(i["findAllUserServers"])().then((function(e){if(200===e.data.code){var o=e.data.data.length;t.rows=[];for(var a=0;a<o;a++)t.rows.push({id:e.data.data[a].id,domain:e.data.data[a].firstServerName,name:e.data.data[a].name,status:e.data.data[a].isOn,operation:"编辑"});t.loading=!t.loading}}))},updateDomainNameStatus:function(t,e,o){var a=this;r()({title:"确定"+(!0===o?"启用":"停用")+"域名?",text:"确定要"+(!0===o?"启用":"停用")+" "+e+" 这个域名？",icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then((function(e){e&&Object(i["updateServerIsOn"])(t,o).then((function(t){200===t.data.code?(a.$q.notify({icon:"insert_emoticon",message:"更新成功",color:"green",position:"top",timeout:1500}),r()("更新成功!",{icon:"success"}),a.getDomainList()):a.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:5e3})})).catch((function(t){a.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:5e3})}))}))},removeDomainName:function(t,e){var o=this;r()({title:"确定删除域名?",text:"确定要删除 "+e+" 这个域名？",icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then((function(e){e&&Object(i["deleteServer"])(t).then((function(t){200===t.data.code?(r()("删除成功!",{icon:"success"}),o.$q.notify({icon:"insert_emoticon",message:"删除成功",color:"green",position:"top",timeout:1500}),o.getDomainList()):o.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:1500})})).then((function(t){o.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:1500})}))}))},settingDomain:function(t){this.$router.push({path:"/domainName/domain?id="+t})}}}),l=c,d=o("2877"),m=o("fe09"),p=Object(d["a"])(l,a,n,!1,null,null,null);e["default"]=p.exports;p.options.components=Object.assign(Object.create(p.options.components||null),p.options.components||{},{QTable:m["K"],QTr:m["R"],QTd:m["M"],QBadge:m["c"],QBtn:m["f"],QTooltip:m["Q"],QToolbarTitle:m["P"],QDialog:m["j"],QCard:m["g"],QCardSection:m["i"],QInput:m["q"],QCardActions:m["h"],QIcon:m["o"]}),p.options.directives=Object.assign(Object.create(p.options.directives||null),p.options.directives||{},{ClosePopup:m["a"]})}}]);