(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-43a9a1e6","chunk-2d0b9ba4"],{"33d2":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[void 0!==t.label?a("div",{staticClass:"text-h6"},[t._v(t._s(t.label))]):t._e(),a("div",{staticClass:"row",staticStyle:{height:"100%"}},[a("div",{staticClass:"col"},[a("q-input",{attrs:{value:"",outlined:"",label:"搜索",dense:""},on:{input:t.AsearCh,focus:t.AsearCh},model:{value:t.aSearCh,callback:function(e){t.aSearCh=e},expression:"aSearCh"}}),a("q-tab-panels",{staticClass:"shadow-2 rounded-borders",staticStyle:{height:"500px"},attrs:{animated:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[a("q-tab-panel",{attrs:{name:"mails"}},[a("q-list",{attrs:{separator:""}},t._l(t.rows,(function(e,i,s){return a("div",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"bg-teal-1 text-grey-8",active:e["active"]},on:{click:function(a){return t.item_click(1,e["id"])}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(void 0===e["title"]?"":e["title"]))]),void 0!==e["desc"]?a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e["desc"]))]):t._e()],1)],1)],1)})),0)],1)],1)],1),a("div",{staticClass:"q-pa-md col-2 flex justify-center",staticStyle:{"max-height":"10%",height:"12px"}},[a("div",{staticClass:"column"},[a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:">>"},on:{click:function(e){return t.moved_item_click("right_all")}}})],1),a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:">"},on:{click:function(e){return t.moved_item_click("right")}}})],1),a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:"<"},on:{click:function(e){return t.moved_item_click("left")}}})],1),a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:"<<"},on:{click:function(e){return t.moved_item_click("left_all")}}})],1),a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:"取消"},on:{click:function(e){return t.cancel()}}})],1),a("div",{staticClass:"col"}),a("div",{staticClass:"col"},[a("q-btn",{attrs:{color:"white","text-color":"black",label:"确定"},on:{click:function(e){return t.preservation()}}})],1)])]),a("div",{staticClass:"col"},[a("div",{staticStyle:{height:"7%"}},[t._v("已选择：")]),a("q-tab-panels",{staticClass:"shadow-2 rounded-borders",staticStyle:{height:"500px"},attrs:{animated:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[a("q-tab-panel",{attrs:{name:"mails"}},t._l(t.rows2,(function(e,i,s){return a("div",[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"","active-class":"bg-teal-1 text-grey-8",active:e["active"]},on:{click:function(a){return t.item_click(2,e["id"])}}},[a("q-item-section",[a("q-item-label",[t._v(t._s(e["title"]))]),a("q-item-label",{attrs:{caption:"",lines:"1"}},[t._v(t._s(e["desc"]))])],1)],1)],1)})),0)],1)],1)])])},s=[],n=(a("4de4"),a("d81d"),a("92af")),o={name:"shuttleFrame",data:function(){return{panel:"mails",rows:[],rawDataRows:[],rows2:[],id:-1,id2:-1,aSearCh:""}},props:{data:Array,label:String},mounted:function(){this.rows=Object(n["default"])(this.data);for(var t=this.rows.length,e=0;e<t;e++)this.rows[e].active=!1,this.rows[e].id=e},methods:{item_click:function(t,e){if(1===t){for(var a=this.rows.length,i=0;i<a;i++)this.rows[i].active=this.rows[i].id===e;this.id=e}else{for(var s=this.rows2.length,n=0;n<s;n++)this.rows2[n].active=this.rows2[n].id===e;this.id2=e}this.$forceUpdate()},moved_item_click:function(t){var e=this,a=[],i=[],s=0;switch(t){case"right":if(-1===this.id)break;a=this.rows.filter((function(t){return t.id!==e.id})),i=this.rows.filter((function(t){return t.id===e.id})),this.rows2.push(i[0]),this.rows=a;break;case"left":if(-1===this.id2)break;i=this.rows2.filter((function(t){return t.id!==e.id2})),a=this.rows2.filter((function(t){return t.id===e.id2})),this.rows.push(a[0]),this.rows2=i;break;case"right_all":s=this.rows.length;for(var o=0;o<s;o++)this.rows2.push(this.rows[o]);this.rows=this.rows.filter((function(t){return!1}));break;case"left_all":s=this.rows2.length;for(var r=0;r<s;r++)this.rows.push(this.rows2[r]);this.rows2=this.rows2.filter((function(t){return!1}));break;default:}this.id=-1,this.id2=-1,this.rows=this.rows.map((function(t){return t.active=!1,t})),this.rows2=this.rows2.map((function(t){return t.active=!1,t})),this.$forceUpdate();var c=this.rows2.map((function(t){return{title:t.title,desc:t.desc,value:t.value}}));this.rawDataRows=Object(n["default"])(this.rows),this.$emit("getMobileItems",c)},cancel:function(){this.$emit("cancel")},preservation:function(){this.$emit("preservation")},AsearCh:function(){swal("暂时不能搜索",{icon:"warning"})}}},r=o,c=a("2877"),l=a("fe09"),d=Object(c["a"])(r,i,s,!1,null,"08f96221",null);e["default"]=d.exports;d.options.components=Object.assign(Object.create(d.options.components||null),d.options.components||{},{QInput:l["q"],QTabPanels:l["J"],QTabPanel:l["I"],QList:l["v"],QItem:l["r"],QItemSection:l["t"],QItemLabel:l["s"],QBtn:l["f"]}),d.options.directives=Object.assign(Object.create(d.options.directives||null),d.options.directives||{},{Ripple:l["T"]})},"42d8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{data:t.rows,columns:t.columns,filter:t.filter,loading:t.loading,pagination:t.pagination,title:"证书管理","no-data-label":"你还没有证书,去添加/申请吧","no-results-label":"没有这个证书","loading-label":"稍等哦，正在加载中","rows-per-page-label":"每页显示数量：","rows-per-page-options":[10,15,20,25,50,0],"row-key":"name"},on:{"update:pagination":function(e){t.pagination=e},request:t.onRequest},scopedSlots:t._u([{key:"body",fn:function(e){return[a("q-tr",{attrs:{props:e}},[a("q-td",{key:"id",attrs:{props:e}},[t._v(" "+t._s(e.row.id)+" ")]),a("q-td",{key:"name",attrs:{props:e}},[t._v(" "+t._s(e.row.name)+" ")]),a("q-td",{key:"commonNames1",attrs:{props:e}},[t._v(" "+t._s(e.row.commonNames1)+" ")]),a("q-td",{key:"commonNames0",attrs:{props:e}},[t._v(" "+t._s(e.row.commonNames0)+" ")]),a("q-td",{key:"dnsNames",attrs:{props:e}},t._l(e.row.dnsNames,(function(e,i,s){return a("div",[a("q-badge",{attrs:{align:"middle"}},[t._v(t._s(e))])],1)})),0),a("q-td",{key:"timeBeginAt",attrs:{props:e}},[t._v(" "+t._s(e.row.timeBeginAt)+" ")]),a("q-td",{key:"timeEndAt",attrs:{props:e}},[t._v(" "+t._s(e.row.timeEndAt)+" ")]),a("q-td",{key:"nums",attrs:{props:e}},[t._v(" "+t._s(e.row.nums)+" ")]),a("q-td",{key:"edit",attrs:{props:e}},[a("div",{staticClass:"q-gutter-sm"},[a("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"add_link",size:"10px"},on:{click:function(a){return t.shuttleBoxGetData(e.row.id,e.row.name,e.row.timeEndAt)}}},[a("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 绑定域名 ")])],1),a("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"delete",size:"10px"},on:{click:function(a){return t.deleteSSLCert1(e.row.id,e.row.edit)}}},[a("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 删除证书 ")])],1)],1)])],1)]}},{key:"top",fn:function(){return[a("q-toolbar-title",[t._v(" 证书管理 "),a("div",{staticClass:"q-gutter-sm"},[a("q-btn",{attrs:{color:"primary",label:"+ 添加证书"},on:{click:function(e){t.prompt=!0}}}),a("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[a("q-card",{staticStyle:{"min-width":"40%"}},[a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("添加证书")])]),a("q-card-section",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-h6"},[t._v("*证书说明")])]),a("div",{staticClass:"col-8"},[a("q-input",{attrs:{dense:"",autofocus:"",hint:"可以简单说明证书的用途。"},model:{value:t.certName,callback:function(e){t.certName=e},expression:"certName"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-h6"},[t._v("*证书类型")])]),a("div",{staticClass:"col-8"},[a("q-select",{staticStyle:{width:"62%"},attrs:{filled:"",options:["加密证书","CA证书"],"emit-value":"","map-options":"",dense:""},model:{value:t.isCA,callback:function(e){t.isCA=e},expression:"isCA"}})],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-h6"},[t._v("*选择证书文件")])]),a("div",{staticClass:"col-8"},[a("q-uploader",{staticStyle:{width:"62%"},attrs:{factory:t.factoryFn,"auto-upload":!0,"auto-hide-upload-btn":!0,filter:function(t){return t.filter((function(t){return"application/x-x509-ca-cert"===t.type}))}}})],1)]),"加密证书"===t.isCA?a("div",{staticClass:"row"},[a("div",{staticClass:"col-3"},[a("div",{staticClass:"text-h6"},[t._v("*选择私钥文件")])]),a("div",{staticClass:"col-8"},[a("q-uploader",{staticStyle:{width:"62%"},attrs:{factory:t.factoryFn,"auto-upload":!0,"auto-hide-upload-btn":!0}})],1)]):t._e()]),a("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"},on:{click:function(e){t.certData_d="",t.keyData_d="",t.certData="",t.keyData="",t.certName=""}}}),a("q-btn",{attrs:{flat:"",label:"确定添加"},on:{click:function(e){return t.updateCert()}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.bind,callback:function(e){t.bind=e},expression:"bind"}},[a("q-card",{staticStyle:{"min-width":"40%",height:"70%"}},[a("q-card-section",[a("shuttleFrame",{attrs:{data:t.shuttleFrameData,label:t.shuttleFrameTitle},on:{getMobileItems:t.getMobileItems,preservation:t.preservation,cancel:t.shuttleBoxCancel}})],1)],1)],1)],1)]),a("q-input",{attrs:{borderless:"",dense:"",debounce:"600",placeholder:"Search"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"no-data",fn:function(e){var i=e.icon,s=e.message,n=e.filter;return[a("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v(" oh~... "+t._s(s)+" ")]),a("q-icon",{attrs:{size:"2em",name:n?"filter_b_and_w":i}})],1)]}}])})],1)},s=[],n=(a("4de4"),a("b0c0"),a("d3b7"),a("1940")),o=a.n(n),r=a("e762"),c=a("73f5"),l=a("c1df"),d=a.n(l),m=a("33d2"),u=a("0fc6"),p=a("f508"),h=a("22ba"),f={name:"cert",components:{ShuttleFrame:m["default"]},data:function(){return{rows:[],prompt:!1,bind:!1,isCA:"加密证书",certData:"",certData_d:"",keyData:"",keyData_d:"",certName:"",shuttleFrameData:[],shuttleFrameDataV2:[],shuttleFrameTitle:"",pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:10},columns:[{name:"id",required:!0,label:"id",align:"left",field:"id",style:"width: 100px",sortable:!0},{name:"name",align:"left",label:"备注名",field:"name",sortable:!0},{name:"commonNames1",align:"left",label:"发行组织",field:"commonNames1",sortable:!0},{name:"commonNames0",align:"left",label:"证书类型",field:"commonNames0",sortable:!0},{name:"dnsNames",align:"left",label:"域名",field:"dnsNames",sortable:!0},{name:"timeBeginAt",align:"left",label:"生效日期",field:"timeBeginAt",sortable:!0},{name:"timeEndAt",align:"left",label:"过期日期",field:"timeEndAt",sortable:!0},{name:"nums",align:"left",label:"绑定域名数",field:"nums",sortable:!0},{name:"edit",align:"center",label:"操作",field:"edit",sortable:!0}],filter:"",loading:!1}},mounted:function(){this.getCertificateData(this.pagination.page*this.pagination.rowsPerPage-this.pagination.rowsPerPage,this.pagination.page*this.pagination.rowsPerPage)},methods:{factoryFn:function(t){var e=t[0],a=new FileReader,i=new Promise((function(t,e){a.onload=function(){t(a.result)},a.onerror=function(t){a.abort(),e(t)}}));return a.readAsText(e,"UTF-8"),"application/x-x509-ca-cert"===e.type?this.certData=i:this.keyData=i,i},updateCert:function(){var t=this;this.certData.then((function(e){t.certData_d=e,t.certData_d=r["a"].encode(t.certData_d),"加密证书"===t.isCA?t.keyData.then((function(e){t.keyData_d=e,t.keyData_d=r["a"].encode(t.keyData_d),Object(c["createSSLCert"])(t.certName,!1,t.certData_d,t.keyData_d).then((function(e){200===e.data.code?(o()("创建成功",{icon:"success"}),t.$q.notify({icon:"insert_emoticon",message:e.data.message,color:"green",position:"top",timeout:1500}),t.getCertificateData(),t.prompt=!1,t.certData_d="",t.keyData_d="",t.certData="",t.keyData="",t.certName=""):(o()(e.data.message,{icon:"error"}),t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}))})).catch((function(t){}))})):(t.keyData_d=r["a"].encode(null),Object(c["createSSLCert"])(t.certName,!0,t.certData_d,t.keyData_d).then((function(e){200===e.data.code?(o()("创建成功",{icon:"success"}),t.$q.notify({icon:"insert_emoticon",message:"创建成功",color:"green",position:"top",timeout:1500}),t.getCertificateData(),t.prompt=!1,t.certData_d="",t.keyData_d="",t.certData="",t.keyData="",t.certName=""):(o()(e.data.message,{icon:"error"}),t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}))})).catch((function(t){})))}))},getCertificateData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.loading=!0,Object(c["listSSLCerts"])(e,a,i).then((function(e){if(200===e.data.code){var a=JSON.parse(r["a"].decode(e.data.data.data)),i=a.length;t.rows=[];for(var s=0;s<i;s++)t.rows.push({id:a[s].id,name:a[s].name,commonNames1:a[s].commonNames[1],commonNames0:a[s].commonNames[0],dnsNames:a[s].dnsNames,timeBeginAt:d()(parseInt(1e3*a[s].timeBeginAt)).format("YYYY/MM/DD hh:mm:ss"),timeEndAt:d()(parseInt(1e3*a[s].timeEndAt)).format("YYYY/MM/DD hh:mm:ss"),nums:a[s].count,edit:a[s].name});t.pagination.rowsNumber=e.data.data.count}else t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500});t.loading=!1})).catch((function(e){t.loading=!1}))},onRequest:function(t){var e=t.pagination,a=e.page,i=e.rowsPerPage;e.sortBy,e.descending;this.pagination.rowsPerPage=i,this.pagination.page=a,this.getCertificateData(this.pagination.page*this.pagination.rowsPerPage-this.pagination.rowsPerPage,this.pagination.page*this.pagination.rowsPerPage,t.filter)},deleteSSLCert1:function(t,e){var a=this;o()({title:"确定要删除证书？",text:"确定要删除证书 "+e,icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then((function(e){e&&Object(c["deleteSSLCert"])(t).then((function(t){200===t.data.code?(o()("删除成功",{icon:"success"}),a.$q.notify({icon:"insert_emoticon",message:"删除成功",color:"green",position:"top",timeout:1500}),a.getCertificateData()):(o()(t.data.message,{icon:"error"}),a.$q.notify({icon:"insert_emoticon",message:t.data.message,color:"green",position:"top",timeout:1500}))})).catch((function(t){}))}))},getMobileItems:function(t){this.shuttleFrameDataV2=t},preservation:function(){var t=this,e=this.shuttleFrameDataV2.length;0===e&&o()("未选择域名",{icon:"warning"});for(var a=function(e){p["a"].show(),Object(h["updateOriginSSL"])(t.shuttleFrameDataV2[e].value,t.certId).then((function(a){200===a.data.code?t.$q.notify({icon:"insert_emoticon",message:t.shuttleFrameDataV2[e].title+" 成功绑定",color:"green",position:"top",timeout:1500}):t.$q.notify({icon:"warning",message:t.shuttleFrameDataV2[e].title+" 绑定失败",color:"warning",position:"top",timeout:1500}),p["a"].hide()})).catch((function(t){p["a"].hide()}))},i=0;i<e;i++)a(i)},shuttleBoxGetData:function(t,e,a){var i=this;this.shuttleFrameData=[],this.shuttleFrameTitle="选择要绑定 "+e+"("+a+") 的域名",p["a"].show(),Object(u["findAllUserServers"])().then((function(e){if(200===e.data.code){i.certId=t;for(var a=e.data.data.length,s=0;s<a;s++)i.shuttleFrameData.push({title:e.data.data[s].name,desc:e.data.data[s].firstServerName,value:e.data.data[s].id});i.bind=!0}else i.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500});p["a"].hide()})).catch((function(t){p["a"].hide()}))},shuttleBoxCancel:function(){this.bind=!1}}},g=f,v=a("2877"),b=a("fe09"),w=Object(v["a"])(g,i,s,!1,null,null,null);e["default"]=w.exports;w.options.components=Object.assign(Object.create(w.options.components||null),w.options.components||{},{QTable:b["K"],QTr:b["R"],QTd:b["M"],QBadge:b["c"],QBtn:b["f"],QTooltip:b["Q"],QToolbarTitle:b["P"],QDialog:b["j"],QCard:b["g"],QCardSection:b["i"],QInput:b["q"],QSelect:b["C"],QUploader:b["S"],QCardActions:b["h"],QIcon:b["o"]}),w.options.directives=Object.assign(Object.create(w.options.directives||null),w.options.directives||{},{ClosePopup:b["a"]})}}]);