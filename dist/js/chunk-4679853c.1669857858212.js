(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4679853c","chunk-2d22252c","chunk-2d224c87","chunk-2d0e4cf8"],{"0f15":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"q-pa-md",staticStyle:{height:"100%"}},[o("div",{staticClass:"q-gutter-y-md",staticStyle:{"max-width":"100%",height:"100%"}},[o("q-card",{staticStyle:{height:"100%"}},[o("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab",{attrs:{name:"mails",label:"基本配置"}}),o("q-tab",{attrs:{name:"alarms",label:"回源配置"}}),o("q-tab",{attrs:{name:"movies",label:"HTTP/S配置"}}),o("q-tab",{attrs:{name:"test",label:"测试"}})],1),o("q-separator"),o("q-tab-panels",{staticStyle:{height:"90%"},attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[o("q-tab-panel",{attrs:{name:"mails"}},[o("q-markup-table",{attrs:{separator:"none",flat:!0}},[o("thead",[o("tr",{staticStyle:{height:"0"}},[o("th",{staticClass:"text-left",staticStyle:{width:"10px"}}),o("th",{staticClass:"text-right",staticStyle:{width:"100%"}})])]),o("tbody",[o("tr",[o("td",{staticClass:"text-left"},[t._v("网站名称")]),o("td",{staticClass:"text-left"},[o("q-input",{model:{value:t.doMainInfo.basic.name,callback:function(e){t.$set(t.doMainInfo.basic,"name",e)},expression:"doMainInfo.basic.name"}})],1)]),o("tr",[o("td",{staticClass:"text-left"},[t._v("域名")]),o("td",{staticClass:"text-left"},[t._v(t._s(this.doMainInfo.basic.domain))])]),o("tr",[o("td",{staticClass:"text-left"},[t._v("CNAME")]),o("td",{staticClass:"text-left"},[t._v(t._s(this.doMainInfo.basic.cname))])]),o("tr",[o("td",{staticClass:"text-left"},[t._v("业务场景")]),o("td",{staticClass:"text-left"},[t._v(t._s(this.doMainInfo.basic.type))])]),o("tr",[o("td",{staticClass:"text-left"},[t._v("IPv6 访问")]),o("td",{staticClass:"text-left"},[t._v("默认已开启(如cdn节点不支持ipv6则不支持,具体咨询客服)")])])])]),o("q-separator")],1),o("q-tab-panel",{attrs:{name:"alarms"}},[o("q-list",{attrs:{bordered:""}},[o("q-expansion-item",{attrs:{group:"somegroup",icon:"explore",label:"其他设置","header-class":"text-primary"}},[o("q-card",[o("q-form",{staticClass:"q-gutter-md",on:{submit:t.updateServerReverseProxy}},[o("q-card-section",[o("div",{staticClass:"text-h6"},[t._v("是否启用源站")]),o("q-toggle",{attrs:{name:"reverseProxy_isOn",label:!0===t.doMainInfo.reverseProxy.isOn?"启用":"关闭"},model:{value:t.doMainInfo.reverseProxy.isOn,callback:function(e){t.$set(t.doMainInfo.reverseProxy,"isOn",e)},expression:"doMainInfo.reverseProxy.isOn"}}),o("div",[o("q-btn",{attrs:{label:"保存",type:"submit",color:"primary"}})],1)],1)],1)],1)],1)],1),[o("div",{staticClass:"q-pa-md"},[o("q-table",{attrs:{title:"主要源站","no-data-label":"你还没有主源站,去添加吧","no-results-label":"没有这个主源站","loading-label":"稍等哦，正在加载中","rows-per-page-label":"每页显示数量：",loading:t.loading_master_proxy,data:t.doMainInfo.reverseProxy.data,columns:t.doMainInfo.reverseProxy.columns,"row-key":"name"},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"id",attrs:{props:e}},[t._v(" "+t._s(e.row.id)+" ")]),o("q-td",{key:"isOn",attrs:{props:e}},[e.row.isOn?o("q-badge",{attrs:{color:"green"}},[t._v(" 正常 ")]):o("q-badge",{attrs:{color:"red"}},[t._v(" 已停用 ")])],1),o("q-td",{key:"protocol",attrs:{props:e}},[o("div",[o("q-badge",{attrs:{align:"middle"}},[t._v(t._s(e.row.protocol[0]))])],1),o("div",[e.row.protocol[1]?o("q-badge",{attrs:{align:"middle"}},[t._v("有证书")]):t._e()],1)]),o("q-td",{key:"host",attrs:{props:e}},[t._v(" "+t._s(e.row.host)+" ")]),o("q-td",{key:"portRange",attrs:{props:e}},[t._v(" "+t._s(e.row.portRange)+" ")]),o("q-td",{key:"weight",attrs:{props:e}},[t._v(" "+t._s(e.row.weight)+" ")]),o("q-td",{key:"edit",attrs:{props:e}},[o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"settings",size:"10px"},on:{click:function(o){return t.modifyOrigin(e.row.id)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 修改配置 ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:!0===e.row.isOn?"do_disturb_alt":"lock_open",size:"10px"},on:{click:function(o){return t.enableOrigin(e.row.id,e.row.host+":"+e.row.portRange)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" "+t._s(!0===e.row.isOn?"停用源站":"启用源站")+" ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"delete",size:"10px",disable:e.row.isOn},on:{click:function(o){t.isMaster=!0,t.deleteOrigin1(e.row.id,e.row.host)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 删除源站 ")])],1)],1)])],1)]}},{key:"top",fn:function(){return[o("q-toolbar-title",[t._v(" 主要源站 "),o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{color:"primary",label:"+ 添加域名"},on:{click:function(e){t.isMaster=!0,t.modifyOrigin_add(),t.prompt=!0}}})],1)]),o("q-input",{attrs:{borderless:"",dense:"",debounce:"20",placeholder:"Search"},model:{value:t.master_filter,callback:function(e){t.master_filter=e},expression:"master_filter"}},[o("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0}])})],1)],[o("div",{staticClass:"q-pa-md"},[o("q-table",{attrs:{title:"备用源站","no-data-label":"你还没有备用源站,去添加吧","no-results-label":"没有这个备用源站","loading-label":"稍等哦，正在加载中","rows-per-page-label":"每页显示数量：",loading:t.loading_slave1_proxy,data:t.doMainInfo.reverseProxy.alternateData,columns:t.doMainInfo.reverseProxy.columns,"row-key":"name"},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"id",attrs:{props:e}},[t._v(" "+t._s(e.row.id)+" ")]),o("q-td",{key:"isOn",attrs:{props:e}},[e.row.isOn?o("q-badge",{attrs:{color:"green"}},[t._v(" 正常 ")]):o("q-badge",{attrs:{color:"red"}},[t._v(" 已停用 ")])],1),o("q-td",{key:"protocol",attrs:{props:e}},[o("div",[o("q-badge",{attrs:{align:"middle"}},[t._v(t._s(e.row.protocol[0]))])],1),o("div",[e.row.protocol[1]?o("q-badge",{attrs:{align:"middle"}},[t._v("有证书")]):t._e()],1)]),o("q-td",{key:"host",attrs:{props:e}},[t._v(" "+t._s(e.row.host)+" ")]),o("q-td",{key:"portRange",attrs:{props:e}},[t._v(" "+t._s(e.row.portRange)+" ")]),o("q-td",{key:"weight",attrs:{props:e}},[t._v(" "+t._s(e.row.weight)+" ")]),o("q-td",{key:"edit",attrs:{props:e}},[o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"settings",size:"10px"},on:{click:function(o){return t.modifyOrigin(e.row.id)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 修改配置 ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:!0===e.row.isOn?"do_disturb_alt":"lock_open",size:"10px"},on:{click:function(o){return t.enableOrigin(e.row.id,e.row.host+":"+e.row.portRange)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" "+t._s(!0===e.row.isOn?"停用源站":"启用源站")+" ")])],1),o("q-btn",{attrs:{round:"",color:"grey-4","text-color":"grey-7",icon:"delete",size:"10px",disable:e.row.isOn},on:{click:function(o){return t.deleteOrigin1(e.row.id,e.row.host)}}},[o("q-tooltip",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[t._v(" 删除源站 ")])],1)],1)])],1)]}},{key:"top",fn:function(){return[o("q-toolbar-title",[t._v(" 备用源站 "),o("div",{staticClass:"q-gutter-sm"},[o("q-btn",{attrs:{color:"primary",label:"+ 添加域名"},on:{click:function(e){t.isMaster=!1,t.modifyOrigin_add(),t.prompt=!0}}})],1)]),o("q-input",{attrs:{borderless:"",dense:"",debounce:"20",placeholder:"Search"},model:{value:t.master_filter,callback:function(e){t.master_filter=e},expression:"master_filter"}},[o("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0}])})],1)],o("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[o("q-card",{staticStyle:{"min-width":"40%"}},[o("q-card-section",[o("div",{staticClass:"text-h6"},[t._v(t._s(!0===t.isAdd?"新增源站":"修改源站"))])]),o("q-card-section",{staticClass:"q-pt-none"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("*取源协议")])]),o("div",{staticClass:"col-8"},[o("q-select",{staticStyle:{width:"60%"},attrs:{filled:"",options:["http","https"],"emit-value":"","map-options":"",dense:""},model:{value:t.doMainInfo.reverseProxy.editData.addr.protocol,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData.addr,"protocol",e)},expression:"doMainInfo.reverseProxy.editData.addr.protocol"}}),o("div",[t._v("源站使用的协议")])],1)]),"https"===t.doMainInfo.reverseProxy.editData.addr.protocol?o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("https证书")])]),o("div",{staticClass:"col-8"},[o("q-select",{staticStyle:{width:"60%"},attrs:{filled:"",options:t.doMainInfo.HTTPS.SSLoptions,"emit-value":"","map-options":"",dense:""},model:{value:t.doMainInfo.HTTPS.SSL_origin,callback:function(e){t.$set(t.doMainInfo.HTTPS,"SSL_origin",e)},expression:"doMainInfo.HTTPS.SSL_origin"}}),o("div",[t._v("可以选择连接源站使用的证书。添加证书请到证书管理")])],1)]):t._e(),o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("*源站地址")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{dense:"",autofocus:"",hint:"源站服务器地址，通常是一个IP（或域名），不需要加 http:// 或 https://。"},model:{value:t.doMainInfo.reverseProxy.editData.addr.host,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData.addr,"host",e)},expression:"doMainInfo.reverseProxy.editData.addr.host"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("*源站端口")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{type:"number",rules:[function(t){return t>0&&t<=65535||"端口必须为1-65535"}],dense:"",autofocus:"",hint:"源站端口，通常是1-65535"},model:{value:t.doMainInfo.reverseProxy.editData.addr.portRange,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData.addr,"portRange",e)},expression:"doMainInfo.reverseProxy.editData.addr.portRange"}})],1)]),o("q-list",{staticClass:"rounded-borders",attrs:{bordered:""}},[o("q-expansion-item",{attrs:{dense:"","expand-separator":"",group:"somegroup",label:"更多选项"}},[o("q-card",[o("q-card-section",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("回源主机名")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{dense:"",autofocus:"",hint:"请求源站时的Host，用于修改源站接收到的域名，自定义Host内容中支持请求变量。默认请求地址"},model:{value:t.doMainInfo.reverseProxy.editData.requestHost,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData,"requestHost",e)},expression:"doMainInfo.reverseProxy.editData.requestHost"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("权重")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{type:"number",rules:[function(t){return t>=0||"权重必须>=0"}],dense:"",autofocus:"",hint:"数字越大，代表分配的请求比例越多。"},model:{value:t.doMainInfo.reverseProxy.editData.weight,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData,"weight",e)},expression:"doMainInfo.reverseProxy.editData.weight"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("连接失败超时时间")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{type:"number",rules:[function(t){return t>=0||"连接失败超时时间必须>=0"}],suffix:"秒",dense:"",autofocus:"",hint:"连接源站失败的最大超时时间，0表示不限制。"},model:{value:t.doMainInfo.reverseProxy.editData.connTimeout.count,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData.connTimeout,"count",e)},expression:"doMainInfo.reverseProxy.editData.connTimeout.count"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-3"},[o("div",{staticClass:"text-h6"},[t._v("读取超时时间")])]),o("div",{staticClass:"col-8"},[o("q-input",{attrs:{type:"number",rules:[function(t){return t>=0||"读取超时时间必须>=0"}],suffix:"秒",dense:"",autofocus:"",hint:"读取内容时的最大超时时间，0表示不限制。"},model:{value:t.doMainInfo.reverseProxy.editData.readTimeout.count,callback:function(e){t.$set(t.doMainInfo.reverseProxy.editData.readTimeout,"count",e)},expression:"doMainInfo.reverseProxy.editData.readTimeout.count"}})],1)])])],1)],1)],1)],1),o("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"取消"}}),o("q-btn",{attrs:{flat:"",label:"保存"},on:{click:function(e){!0===t.isAdd?t.createOrigin():t.updateOrigin()}}})],1)],1)],1)],2),o("q-tab-panel",{attrs:{name:"movies"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("HTTPS证书")])]),o("div",{staticClass:"col-8"},[o("q-select",{staticStyle:{width:"60%"},attrs:{filled:"",options:t.doMainInfo.HTTPS.SSLoptions,"emit-value":"","map-options":"",dense:""},on:{input:function(e){return t.updateSSLPolicy()}},model:{value:t.doMainInfo.HTTPS.SSL,callback:function(e){t.$set(t.doMainInfo.HTTPS,"SSL",e)},expression:"doMainInfo.HTTPS.SSL"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("强制HTTPS")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"强制跳转HTTPS"},on:{input:function(e){return t.updateHTTPWebRedirectToHTTPS()}},model:{value:t.doMainInfo.HTTPS.isHTTPS,callback:function(e){t.$set(t.doMainInfo.HTTPS,"isHTTPS",e)},expression:"doMainInfo.HTTPS.isHTTPS"}}),o("div",{staticClass:"row"},[o("div",{staticClass:"col-1"},[o("div",[t._v("跳转方式")])]),o("div",{staticClass:"col-8"},[o("q-option-group",{attrs:{options:t.doMainInfo.HTTPS.HTTPSoptions,color:"primary",inline:"",dense:""},on:{input:function(e){return t.updateHTTPWebRedirectToHTTPS()}},model:{value:t.doMainInfo.HTTPS.HTTPSgroup,callback:function(e){t.$set(t.doMainInfo.HTTPS,"HTTPSgroup",e)},expression:"doMainInfo.HTTPS.HTTPSgroup"}})],1)]),o("div",[t._v("开启后，即使用户发起 HTTP 请求，也会强制跳转为 HTTPS 请求进行访问。")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("启用HTTP/2")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"启用HTTP/2"},on:{input:function(e){return t.updateSSLPolicy()}},model:{value:t.doMainInfo.HTTPS.HTTP2,callback:function(e){t.$set(t.doMainInfo.HTTPS,"HTTP2",e)},expression:"doMainInfo.HTTPS.HTTP2"}}),o("div",[t._v("是否开启 HTTP/2 。")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("TLS版本")])]),o("div",{staticClass:"col-8"},[o("q-option-group",{attrs:{name:"accepted_genres",options:t.doMainInfo.HTTPS.TLSgroup,type:"checkbox",color:"primary",inline:"",disable:!0},model:{value:t.doMainInfo.HTTPS.TLSaccepted,callback:function(e){t.$set(t.doMainInfo.HTTPS,"TLSaccepted",e)},expression:"doMainInfo.HTTPS.TLSaccepted"}}),o("div",[t._v("默认支持以上版本，不可更改")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("TLS最低版本")])]),o("div",{staticClass:"col-8"},[o("q-select",{staticStyle:{width:"60%"},attrs:{filled:"",options:t.doMainInfo.HTTPS.TLSoptions,"emit-value":"","map-options":"",dense:""},on:{input:function(e){return t.updateSSLPolicy()}},model:{value:t.doMainInfo.HTTPS.TLSversion,callback:function(e){t.$set(t.doMainInfo.HTTPS,"TLSversion",e)},expression:"doMainInfo.HTTPS.TLSversion"}}),o("div",[t._v("TLS最低使用的版本")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("HSTS")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"开启HSTS"},on:{input:function(e){return t.updateSSLPolicy()}},model:{value:t.doMainInfo.HTTPS.HSTS,callback:function(e){t.$set(t.doMainInfo.HTTPS,"HSTS",e)},expression:"doMainInfo.HTTPS.HSTS"}}),o("div",[t._v("开启后，CDN 将会自动在响应Header中加入 Strict-Transport-Security: max-age=xxx，用于告知客户端强制使用 HTTPS。 当请求为 HTTP 时，浏览器不会理会此响应头，所以建议与“强制跳转 HTTPS”一同开启。")]),o("q-list",{attrs:{bordered:""}},[o("q-expansion-item",{attrs:{group:"somegroup",icon:"explore",label:"修改","header-class":"text-primary"}},[o("q-card",[o("q-card-section",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-4"},[t._v("HSTS有效时间（max-age）")]),o("div",{staticClass:"col-6"},[o("q-input",{attrs:{type:"number",rules:[function(t){return t>0||"时间必须>0"}],dense:"",suffix:"秒"},model:{value:t.doMainInfo.HTTPS.HSTSgroup.maxtime,callback:function(e){t.$set(t.doMainInfo.HTTPS.HSTSgroup,"maxtime",e)},expression:"doMainInfo.HTTPS.HSTSgroup.maxtime"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-4"},[t._v("HSTS包含子域名")]),o("div",{staticClass:"col-6"},[o("q-toggle",{attrs:{label:"HSTS包含子域名"},model:{value:t.doMainInfo.HTTPS.HSTSgroup.includeSubDomains,callback:function(e){t.$set(t.doMainInfo.HTTPS.HSTSgroup,"includeSubDomains",e)},expression:"doMainInfo.HTTPS.HSTSgroup.includeSubDomains"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-4"},[t._v("HSTS预加载")]),o("div",{staticClass:"col-6"},[o("q-toggle",{attrs:{label:"HSTS预加载"},model:{value:t.doMainInfo.HTTPS.HSTSgroup.preload,callback:function(e){t.$set(t.doMainInfo.HTTPS.HSTSgroup,"preload",e)},expression:"doMainInfo.HTTPS.HSTSgroup.preload"}})],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-5"},[o("q-btn",{on:{click:function(e){return t.updateSSLPolicy()}}},[t._v("保存")])],1)])])],1)],1)],1)],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("OCSP装订")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"OCSP装订"},on:{input:function(e){return t.updateSSLPolicy()}},model:{value:t.doMainInfo.HTTPS.OCSP,callback:function(e){t.$set(t.doMainInfo.HTTPS,"OCSP",e)},expression:"doMainInfo.HTTPS.OCSP"}}),o("div",[t._v("启用 OCSP 装订后， CDN 节点在 TLS 握手时会发送事先缓存的在线证书状态协议（OCSP）响应，供用户验证，无需用户再向数字证书认证机构（CA）发送查询请求。")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("启用HTTP")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"启用HTTP"},on:{input:function(e){return t.updateHttp()}},model:{value:t.doMainInfo.HTTPS.HTTP,callback:function(e){t.$set(t.doMainInfo.HTTPS,"HTTP",e)},expression:"doMainInfo.HTTPS.HTTP"}}),o("div",[t._v("关闭后无法使用http访问网址")])],1)]),o("div",{staticClass:"row"},[o("div",{staticClass:"col-2"},[o("div",[t._v("启用HTTPS")])]),o("div",{staticClass:"col-8"},[o("q-toggle",{attrs:{label:"启用HTTPS"},on:{input:function(e){return t.updateHttps()}},model:{value:t.doMainInfo.HTTPS.HTTPS,callback:function(e){t.$set(t.doMainInfo.HTTPS,"HTTPS",e)},expression:"doMainInfo.HTTPS.HTTPS"}}),o("div",[t._v("关闭后无法使用https访问网址")])],1)])]),o("q-tab-panel",{attrs:{name:"test"}},[o("div",{staticClass:"text-h4 q-mb-md"},[t._v("Mails")]),o("test")],1)],1)],1)],1)])},i=[],n=(o("b0c0"),o("d3b7"),o("25f0"),o("1940")),s=o.n(n),r=o("0fc6"),d=o("92af"),c=o("f508"),l=o("22ba"),u=o("e762"),p=o("73f5"),f=o("c1df"),T=o.n(f),v=o("e237"),S=o("cdb7"),g=o("928a"),P={name:"domain",components:{test:g["default"]},data:function(){return{id:1,tab:"mails",rightItem:[],isAdd:!1,isMaster:!1,prompt:!1,loading_master_proxy:!1,master_filter:"",slave1_filter:"",loading_slave1_proxy:!1,doMainInfo:{basic:{domain:"domain",name:"name",cname:"cname",type:"httpProxy",fwdy:"暂未开启"},HTTPS:{isHTTPS:!1,HTTPSoptions:[{label:"301",value:"301"},{label:"302",value:"302"}],HTTPSgroup:"301",HTTP2:!1,TLSgroup:[{label:"1.0",value:"1.0"},{label:"1.1",value:"1.1"},{label:"1.2",value:"1.2"},{label:"1.3",value:"1.3"},{label:"3.0",value:"3.0"}],TLSaccepted:["1.0","1.1","1.2","1.3","3.0"],TLSoptions:["TLS 1.0","TLS 1.1","TLS 1.2","TLS 1.3","SSL 3.0"],TLSversion:"TLS 1.1",HSTSgroup:{maxtime:30,includeSubDomains:!1,preload:!1},OCSP:!1,HSTS:!1,HTTP:!0,HTTPS:!1,SSL:0,SSL_origin:0,SSLoptions:[{label:"无",value:0}]},reverseProxy:{isOn:!1,editData:{requestHost:"",weight:10,certRef:null,connTimeout:{count:30},readTimeout:{count:0},addr:{protocol:"http",host:"host",portRange:"80",minPort:0,maxPort:0}},data:[],alternateData:[],sourceData:{},columns:[{name:"id",required:!0,label:"id",align:"left",field:"id",style:"width: 150px",sortable:!0},{name:"isOn",align:"left",label:"状态",field:"isOn",sortable:!0},{name:"protocol",align:"left",label:"取源协议",field:"protocol",sortable:!0},{name:"host",align:"left",label:"源站地址",field:"host",sortable:!0},{name:"portRange",align:"left",label:"源站端口",field:"portRange",sortable:!0},{name:"weight",align:"left",label:"权重",field:"weight",sortable:!0},{name:"edit",align:"center",label:"操作",field:"edit",sortable:!0,style:"width: 200px"}]}}}},mounted:function(){if(void 0===this.$route.query.id)return this.$router.push("/domainName/domainNameList"),void s()("请从站点管理的设置进入此页面!",{icon:"warning"});this.id=this.$route.query.id,c["a"].show(),this.getOriginInformation()},methods:{updateServerReverseProxy:function(){var t=this;this.doMainInfo.reverseProxy.sourceData.reverseProxyRef.isOn=this.doMainInfo.reverseProxy.isOn;var e=window.btoa(Object(d["utf16to8"])(JSON.stringify(this.doMainInfo.reverseProxy.sourceData.reverseProxyRef)));Object(r["updateServerReverseProxy"])(this.id,e).then((function(e){200===e.data.code?t.$q.notify({icon:"insert_emoticon",message:"保存成功",color:"green",position:"top",timeout:1500}):t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500})})).catch((function(e){t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500})}))},modifyOrigin:function(t){var e=this;this.isAdd=!1,Object(l["findEnabledOrigin"])(t).then((function(t){200===t.data.code?(e.doMainInfo.reverseProxy.editData=JSON.parse(u["a"].decode(t.data.data)),null===e.doMainInfo.reverseProxy.editData.certRef?e.doMainInfo.HTTPS.SSL_origin=0:e.doMainInfo.HTTPS.SSL_origin=e.doMainInfo.reverseProxy.editData.certRef.certId,e.prompt=!0):e.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:1500})})).catch((function(t){s()("没有此源站信息!",{icon:"error"})}))},updateOrigin:function(){var t=this;if(/^(([-\u4E00-\u9FA5a-z0-9]{1,63})\.)+([\u4E00-\u9FA5a-z]{2,63})\.?$/.test(this.doMainInfo.reverseProxy.editData.addr.host)||/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(this.doMainInfo.reverseProxy.editData.addr.host)){0===this.doMainInfo.HTTPS.SSL_origin?this.doMainInfo.reverseProxy.editData.certRef={isOn:!0,certId:0}:this.doMainInfo.reverseProxy.editData.certRef={isOn:!0,certId:this.doMainInfo.HTTPS.SSL_origin};var e=this.doMainInfo.reverseProxy.editData;e=u["a"].encode(JSON.stringify(this.doMainInfo.reverseProxy.editData)),Object(l["updateOrigin"])(e).then((function(e){200===e.data.code?(s()("保存成功!",{icon:"success"}),t.$q.notify({icon:"insert_emoticon",message:"保存成功",color:"green",position:"top",timeout:1500}),t.getOriginInformation(),t.prompt=!1):(s()(e.data.message,{icon:"warning"}),t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}))})).catch((function(t){}))}else this.$q.notify({icon:"warning",message:"源站地址不合法，不是有效的源站地址，必须是ip/域名",color:"warning",position:"top",timeout:1500})},createOrigin:function(){var t=this,e={};if(e.connTimeout={count:this.doMainInfo.reverseProxy.editData.connTimeout.count},e.readTimeout={count:this.doMainInfo.reverseProxy.editData.readTimeout.count},e.addr=this.doMainInfo.reverseProxy.editData.addr,/^(([-\u4E00-\u9FA5a-z0-9]{1,63})\.)+([\u4E00-\u9FA5a-z]{2,63})\.?$/.test(this.doMainInfo.reverseProxy.editData.addr.host)||/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(this.doMainInfo.reverseProxy.editData.addr.host)){if(0===this.doMainInfo.HTTPS.SSL_origin?e.certRef={isOn:!0,certId:0}:e.certRef={isOn:!0,certId:this.doMainInfo.HTTPS.SSL_origin},e.weight=this.doMainInfo.reverseProxy.editData.weight,e.host=this.doMainInfo.reverseProxy.editData.requestHost,this.isMaster){var o=this.doMainInfo.reverseProxy.sourceData.reverseProxy.primaryOrigins.length;e.sourceData=[];for(var a=0;a<o;a++)e.sourceData.push({id:this.doMainInfo.reverseProxy.sourceData.reverseProxy.primaryOrigins[a].id,isOn:!0})}else{var i=this.doMainInfo.reverseProxy.sourceData.reverseProxy.backupOrigins.length;e.sourceData=[];for(var n=0;n<i;n++)e.sourceData.push({originId:this.doMainInfo.reverseProxy.sourceData.reverseProxy.backupOrigins[n].id,isOn:!0})}e=u["a"].encode(JSON.stringify(e)),Object(l["createOrigin"])(e,this.isMaster,this.doMainInfo.reverseProxy.sourceData.reverseProxyRef.reverseProxyId).then((function(e){200===e.data.code?(s()("新增成功!",{icon:"success"}),t.$q.notify({icon:"insert_emoticon",message:"新增成功",color:"green",position:"top",timeout:1500}),t.getOriginInformation(),t.prompt=!1):(s()("新增失败!",{icon:"warning"}),t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}))})).catch((function(t){}))}else this.$q.notify({icon:"warning",message:"源站地址不合法，不是有效的源站地址，必须是ip/域名",color:"warning",position:"top",timeout:1500})},enableOrigin:function(t,e){var o=this;s()({title:"确定"+(!0===this.doMainInfo.reverseProxy.editData.isOn?"停用":"启用")+"源站域名?",text:"确定要"+(!0===this.doMainInfo.reverseProxy.editData.isOn?"停用":"启用")+" "+e+" 这个源站？",icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then((function(e){e&&Object(l["findEnabledOrigin"])(t).then((function(t){200===t.data.code?(o.doMainInfo.reverseProxy.editData=JSON.parse(u["a"].decode(t.data.data)),o.doMainInfo.reverseProxy.editData.isOn=!o.doMainInfo.reverseProxy.editData.isOn,o.updateOrigin()):o.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:1500})})).catch((function(t){s()("没有此源站信息!",{icon:"error"})}))}))},deleteOrigin1:function(t,e){var o=this;s()({title:"确定删除这个源站?",text:"确定要 "+e+" 这个源站？",icon:"warning",buttons:["取消","确定"],dangerMode:!0}).then((function(e){if(e){var a={};if(o.isMaster){var i=o.doMainInfo.reverseProxy.sourceData.reverseProxy.primaryOrigins.length;a.sourceData=[];for(var n=0;n<i;n++)a.sourceData.push({originId:o.doMainInfo.reverseProxy.sourceData.reverseProxy.primaryOrigins[n].id,isOn:!0})}else{var r=o.doMainInfo.reverseProxy.sourceData.reverseProxy.backupOrigins.length;a.sourceData=[];for(var d=0;d<r;d++)a.sourceData.push({originId:o.doMainInfo.reverseProxy.sourceData.reverseProxy.backupOrigins[d].id,isOn:!0})}a.sourceData=u["a"].encode(JSON.stringify(a.sourceData)),Object(l["deleteOrigin"])(t,o.doMainInfo.reverseProxy.sourceData.reverseProxyRef.reverseProxyId,o.isMaster,a.sourceData).then((function(t){200===t.data.code?(s()("删除成功!",{icon:"success"}),o.$q.notify({icon:"insert_emoticon",message:"删除成功",color:"green",position:"top",timeout:1500}),o.getOriginInformation()):(s()(t.data.message,{icon:"warning"}),o.$q.notify({icon:"warning",message:t.data.message,color:"warning",position:"top",timeout:1500}))})).catch((function(t){}))}}))},modifyOrigin_add:function(){this.doMainInfo.reverseProxy.editData={requestHost:"",weight:10,connTimeout:{count:30},readTimeout:{count:0},addr:{protocol:"http",host:"",portRange:"80",minPort:0,maxPort:0}},this.isAdd=!0},getOriginInformation:function(){var t=this;Object(r["findEnabledServerConfig"])(this.id).then((function(e){if(200===e.data.code){var o=Object(d["utf8to16"])(window.atob(e.data.data));switch(o=JSON.parse(o),t.doMainInfo.basic.domain=o.serverNames[0].name,t.doMainInfo.basic.name=o.name,t.doMainInfo.basic.cname=o.cnameDomain,t.doMainInfo.basic.type=o.type,t.doMainInfo.basic.type){case"httpProxy":t.doMainInfo.basic.type="CDN加速";break;case"httpWeb":t.doMainInfo.basic.type="HTTP Web服务";break;case"tcpProxy":t.doMainInfo.basic.type="TCP反向代理";break;case"udpProxy":t.doMainInfo.basic.type="UDP反向代理";break;default:t.doMainInfo.basic.type="类型异常，建议删除重建"}if(t.loading_master_proxy=!t.loading_master_proxy,t.doMainInfo.reverseProxy.data=[],t.doMainInfo.reverseProxy.sourceData=o,t.doMainInfo.reverseProxy.isOn=o.reverseProxyRef.isOn,null===o.reverseProxy.primaryOrigins)t.doMainInfo.reverseProxy.data=[],t.doMainInfo.reverseProxy.sourceData.reverseProxy.primaryOrigins=[];else for(var a=o.reverseProxy.primaryOrigins.length,i=0;i<a;i++)t.doMainInfo.reverseProxy.data.push({id:o.reverseProxy.primaryOrigins[i].id,isOn:o.reverseProxy.primaryOrigins[i].isOn,protocol:[o.reverseProxy.primaryOrigins[i].addr.protocol,null!==o.reverseProxy.primaryOrigins[i].cert],host:o.reverseProxy.primaryOrigins[i].addr.host,portRange:o.reverseProxy.primaryOrigins[i].addr.portRange,weight:o.reverseProxy.primaryOrigins[i].weight,edit:"操作"});if(t.loading_master_proxy=!1,t.loading_slave1_proxy=!t.loading_slave1_proxy,t.doMainInfo.reverseProxy.alternateData=[],null===o.reverseProxy.backupOrigins)t.doMainInfo.reverseProxy.sourceData.reverseProxy.backupOrigins=[],t.doMainInfo.reverseProxy.alternateData=[];else for(var n=o.reverseProxy.backupOrigins.length,r=0;r<n;r++)t.doMainInfo.reverseProxy.alternateData.push({id:o.reverseProxy.backupOrigins[r].id,isOn:o.reverseProxy.backupOrigins[r].isOn,protocol:[o.reverseProxy.backupOrigins[r].addr.protocol,null!==o.reverseProxy.backupOrigins[r].cert],host:o.reverseProxy.backupOrigins[r].addr.host,portRange:o.reverseProxy.backupOrigins[r].addr.portRange,weight:o.reverseProxy.backupOrigins[r].weight,edit:"操作"});t.loading_slave1_proxy=!1,t.doMainInfo.HTTPS.HTTPS=o.https.isOn,t.doMainInfo.HTTPS.HTTP=o.http.isOn,t.doMainInfo.HTTPS.isHTTPS=o.web.redirectToHTTPS.isOn,t.doMainInfo.HTTPS.HTTPSgroup=0===o.web.redirectToHTTPS.status?"301":o.web.redirectToHTTPS.status.toString(),null!==o.https.sslPolicy.hsts?(t.doMainInfo.HTTPS.HSTS=o.https.sslPolicy.hsts.isOn,t.doMainInfo.HTTPS.HSTSgroup.maxtime=o.https.sslPolicy.hsts.maxAge,t.doMainInfo.HTTPS.HSTSgroup.includeSubDomains=o.https.sslPolicy.hsts.includeSubDomains,t.doMainInfo.HTTPS.HSTSgroup.preload=o.https.sslPolicy.hsts.preload):t.doMainInfo.HTTPS.HSTS=!1,t.doMainInfo.HTTPS.OCSP=o.https.sslPolicy.ocspIsOn,t.doMainInfo.HTTPS.TLSversion=o.https.sslPolicy.minVersion,null!==o.https.sslPolicy.certs&&o.https.sslPolicy.certs.length>0?t.doMainInfo.HTTPS.SSL=o.https.sslPolicy.certs[0].id:t.doMainInfo.HTTPS.SSL=0,Object(p["listSSLCerts"])(0,99999999,null).then((function(e){if(200===e.data.code){t.doMainInfo.HTTPS.SSLoptions=[{label:"无",value:0}];for(var o=JSON.parse(u["a"].decode(e.data.data.data)),a=o.length,i=0;i<a;i++){var n=o[i].name+"(过期时间："+T()(parseInt(1e3*o[i].timeEndAt)).format("YYYY/MM/DD hh:mm:ss")+")";t.doMainInfo.HTTPS.SSLoptions.push({label:n,value:o[i].id})}}})).catch((function(t){})),t.doMainInfo.HTTPS.HTTP2=o.https.sslPolicy.http2Enabled,c["a"].hide()}else s()(e.data.message,{icon:"warning"}),t.$router.push("/console")}))},test:function(t){},updateHttps:function(){var t=this;c["a"].show(),Object(r["updateServerHTTPS"])(this.id,this.doMainInfo.HTTPS.HTTPS).then((function(e){200===e.data.code?t.$q.notify({icon:"insert_emoticon",message:"更新成功",color:"green",position:"top",timeout:1500}):(t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}),t.doMainInfo.HTTPS.HTTPS=!t.doMainInfo.HTTPS.HTTPS),c["a"].hide()})).catch((function(e){t.doMainInfo.HTTPS.HTTPS=!t.doMainInfo.HTTPS.HTTPS,c["a"].hide()}))},updateHttp:function(){var t=this;c["a"].show(),Object(r["updateServerHTTP"])(this.id,this.doMainInfo.HTTPS.HTTP).then((function(e){200===e.data.code?t.$q.notify({icon:"insert_emoticon",message:"更新成功",color:"green",position:"top",timeout:1500}):(t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}),t.doMainInfo.HTTPS.HTTP=!t.doMainInfo.HTTPS.HTTP),c["a"].hide()})).catch((function(e){t.doMainInfo.HTTPS.HTTP=!t.doMainInfo.HTTPS.HTTP,c["a"].hide()}))},updateSSLPolicy:function(){var t=this,e=this.doMainInfo.reverseProxy.sourceData.https.sslPolicyRef.sslPolicyId,o=this.doMainInfo.HTTPS.OCSP,a="无"===this.doMainInfo.HTTPS.SSL?0:this.doMainInfo.HTTPS.SSL,i=this.doMainInfo.HTTPS.HSTS,n=this.doMainInfo.HTTPS.HSTSgroup.maxtime,s=this.doMainInfo.HTTPS.HSTSgroup.includeSubDomains,r=this.doMainInfo.HTTPS.HSTSgroup.preload,d=this.doMainInfo.HTTPS.TLSversion,l=this.doMainInfo.HTTPS.HTTP2,p={isOn:i,maxAge:n,preload:r,includeSubDomains:s};p=u["a"].encode(JSON.stringify(p)),c["a"].show(),Object(v["updateSSLPolicy"])(e,o,a,p,d,l).then((function(e){200===e.data.code?t.$q.notify({icon:"insert_emoticon",message:"更新成功",color:"green",position:"top",timeout:1500}):t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}),c["a"].hide()})).catch((function(t){c["a"].hide()}))},updateHTTPWebRedirectToHTTPS:function(){var t=this,e=this.doMainInfo.HTTPS.isHTTPS,o=this.doMainInfo.HTTPS.HTTPSgroup;c["a"].show(),Object(S["updateHTTPWebRedirectToHTTPS"])(this.doMainInfo.reverseProxy.sourceData.web.id,this.id,e,"301"===o).then((function(e){200===e.data.code?t.$q.notify({icon:"insert_emoticon",message:"更新成功",color:"green",position:"top",timeout:1500}):t.$q.notify({icon:"warning",message:e.data.message,color:"warning",position:"top",timeout:1500}),c["a"].hide()})).catch((function(t){c["a"].hide()}))}}},m=P,y=o("2877"),h=o("fe09"),b=Object(y["a"])(m,a,i,!1,null,"df808a5c",null);e["default"]=b.exports;b.options.components=Object.assign(Object.create(b.options.components||null),b.options.components||{},{QCard:h["g"],QTabs:h["L"],QTab:h["H"],QSeparator:h["D"],QTabPanels:h["J"],QTabPanel:h["I"],QMarkupTable:h["w"],QInput:h["q"],QList:h["v"],QExpansionItem:h["l"],QForm:h["m"],QCardSection:h["i"],QToggle:h["N"],QBtn:h["f"],QTable:h["K"],QTr:h["R"],QTd:h["M"],QBadge:h["c"],QTooltip:h["Q"],QToolbarTitle:h["P"],QIcon:h["o"],QDialog:h["j"],QSelect:h["C"],QCardActions:h["h"],QOptionGroup:h["y"]}),b.options.directives=Object.assign(Object.create(b.options.directives||null),b.options.directives||{},{ClosePopup:h["a"]})},"928a":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",[o("q-table",{attrs:{data:t.data,columns:t.columns,title:"测试","no-data-label":"没有数据","no-results-label":"没有筛选数据","loading-label":"稍等哦，正在加载中","rows-per-page-label":"每页显示数量：","rows-per-page-options":[10,15,20,25,50,0],"row-key":"name"},scopedSlots:t._u([{key:"body",fn:function(e){return[o("q-tr",{attrs:{props:e}},[o("q-td",{key:"name",attrs:{props:e}},[t._v(" "+t._s(e.row.name)+" ")]),o("q-td",{key:"a",attrs:{props:e}},[t._v(" "+t._s(e.row.a)+" ")])],1)]}}])})],1)])},i=[],n={name:"test",data:function(){return{columns:[{name:"name",required:!0,label:"一字段",align:"left",field:"name",style:"width: 100px",sortable:!0}],data:[{name:"张三",a:1,b:2,c:3,d:4},{name:"李四",a:6,b:2,c:3,d:4},{name:"王五",a:8,b:9,c:10,d:11},{name:"张三",a:1,b:2,c:3,d:4},{name:"张三",a:1,b:2,c:3,d:4},{name:"李四",a:1,b:2,c:3,d:4},{name:"王五",a:1,b:2,c:3,d:4}]}}},s=n,r=o("2877"),d=o("fe09"),c=Object(r["a"])(s,a,i,!1,null,"221eed05",null);e["default"]=c.exports;c.options.components=Object.assign(Object.create(c.options.components||null),c.options.components||{},{QTable:d["K"],QTr:d["R"],QTd:d["M"]})},cdb7:function(t,e,o){"use strict";o.r(e),o.d(e,"updateHTTPWebRedirectToHTTPS",(function(){return n}));var a=o("017a"),i=o("6cf6");function n(t,e,o,n){return Object(a["default"])({url:i["routerConfig"].proxy+i["routerConfig"].HTTPWebService.main+i["routerConfig"].HTTPWebService.updateHTTPWebRedirectToHTTPS,method:"post",responseType:"json",data:{httpWebId:t,serverId:e,isOn:o,status:n}})}},e237:function(t,e,o){"use strict";o.r(e),o.d(e,"updateSSLPolicy",(function(){return n}));var a=o("017a"),i=o("6cf6");function n(t,e,o,n,s,r){return Object(a["default"])({url:i["routerConfig"].proxy+i["routerConfig"].SSLPolicyService.main+i["routerConfig"].SSLPolicyService.updateSSLPolicy,method:"post",responseType:"json",data:{sslPolicyId:t,ocsp:e,sslID:o,hsts:n,minVersion:s,http2Enabled:r}})}}}]);